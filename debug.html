<!doctype html>

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Funny Webcam Masks</title>
	<link rel="stylesheet" href="style.css">
	<link href="https://fonts.googleapis.com/css?family=Libre+Barcode+128+Text|Nunito|Permanent+Marker|Fredoka+One" rel="stylesheet">
	<!-- First, include the Webcam.js JavaScript Library -->
	<script type="text/javascript" src="webcam/webcam.min.js"></script>
	<!-- Hotjar Tracking Code for https://uglykiki.github.io/funny-webcam/ -->
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:1024393,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>
</head>

<body>	
    <div id="glitch"></div>
    <div class="title">
       <h1>++Funny Webcam Masks++</h1>
       <p>PLEASE view with computers</p>  
    </div>
    
    <!---load camera--->
    <div class="demo-container">
        <div id="my_camera"></div>
    </div>

    <!-- A button for taking snaps -->
    <div class="top">
		<form>
			<input type="button" value="Run" onClick="start_snapping()">
			<input type="button" value="Reset" onClick="stop_snapping()">
		</form>
	</div>
	<div class="fake-footer">
	Copyright <a href="https://github.com/uglykiki" target="blank">Â© uglykiki</a> 2018 All Rights Reserved
	</div>
	
	 <!---show results--->
	<div id="alert"></div>
	<div class="bottom">
		<div id="results"></div>
	</div>
	
	<!-- Configure a few settings and attach camera -->
	<script language="JavaScript">
		Webcam.set({
			width: 960,
			height: 360,
//          dest_width: 960,
//          dest_height:360,
			image_format: 'jpeg',
			jpeg_quality: 100
		});
		Webcam.attach( '#my_camera' );
	</script>
	
	<!-- Code to handle taking the snapshot and displaying it locally -->
	<script language="JavaScript">
		var timer = null;
		function take_snapshot() {
			// take snapshot and get image data
			Webcam.snap( function(data_uri) {
				// display results in page
				var img = new Image();
				img.src = data_uri;
				document.getElementById('results').appendChild( img );
			} );
		}
        function show_alert(){
            var message = ["Look at you XDDDD!!!!"];
            document.getElementById("alert").innerHTML = message;
        }
        
        //fack glitch
        function myMove() {
          var elem = document.getElementById("glitch");   
          var pos = 400;
          var id = setInterval(frame, 150);
          function frame() {
            if (pos == 600) {
              clearInterval(id);
            } else {
              pos++; 
              elem.style.top = pos + 'px'; 
//              elem.style.left = pos + 'px'; 
            }
          }
        }
        
        //shift functions of the buttoms
        function stop_snapping() {
            if (!timer) {
				take_snapshot();
				timer = setInterval( take_snapshot, 220 );
			}  
            show_alert();
		}
        
		function start_snapping() {
            if (timer) {
				clearTimeout( timer );
				timer = null;
			}
            myMove();//show fake glitch
		}

	</script>
	
</body>
</html>
